/**
 * Created by a on 2017/9/5.
 */
import React,{Component} from 'react';
import {getDefaultIntl} from '../../intl/index'
import {getObjectByKey} from '../../util/index'
export default class LanguageSwitch extends Component{
    constructor(props){
        super(props);
        this.state = {
            curLan:{id:"zh",name:"简体中文", path:"#zh"},
            list:[
                {id:"zh", name:"简体中文", path:"#zh"},
                {id:"en", name:"ENGLISH", path:"#en"}
            ]
        }

        this.onClick = this.onClick.bind(this);
    }

    componentWillMount(){
        getDefaultIntl((intl)=>{
            this.setState({curLan:getObjectByKey(this.state.list, 'id', intl.locale)});
        })
    }

    onClick(data){
        this.setState({curLan:data},()=>{
            window.setLanguage(data.id);
        });
    }

    render(){
        const {className=''} = this.props;
        const {curLan, list} = this.state;
        return <div className={"language-switch "+className}>
                <svg className="svgOnload">
                    <symbol id="zh"><path fill="#d43f3a" d="M180.667,95c0,0,0,32.166,0,37.833S177.5,144,169.5,144S32.276,144.167,29,144.167c-3.276,0-10.812-1.583-10.812-10.5
    s0-32.62,0-32.62s36.31,0.511,36.31,0.579c-0.021,3.668,1.003,7.437,2.061,10.964c5.316,12.66,16.441,14.86,20.376,14.86
    c9.44,0,14.958-5.118,15.117-5.362c0.113-0.209,0.199-0.433,0.255-0.664c0.024-0.272-0.017-4.189-0.051-4.494
    c-0.046-0.184-1.94-0.1-2.4,0.306c-0.856,0.607-5.606,4.137-12.001,4.137c-9.23,0-15.781-9.04-15.781-19.07
    c0-18.302,11.176-21.734,15.372-21.734C84.083,80,90.489,85.331,91.082,85.42c0.181,0.066,0.882-0.344,0.97-0.562
    c0.035-0.305,0.021-4.137,0-4.443c-0.055-0.232-0.141-0.455-0.255-0.664c-0.205-0.3-4.922-5.158-14.095-5.158
    c-3.176-0.04-15.535,1.157-21.041,15.474c-1.098,3.544-2.133,7.571-2.163,11.308c-0.001,0.159-36.31-0.531-36.31-0.531
    s0-23.344,0-32.844c0-8.5,5.562-9.688,11.499-9.688c1.563,0,6.36-0.006,6.36-0.006L36,47.322l-10.412-0.001
    c-9.872,0-17.874,8.003-17.874,17.874v71.498c0,9.872,8.003,17.874,17.874,17.874h148.103c9.872,0,17.874-8.003,17.874-17.874
    V65.196l0,0c0-9.872-8.003-17.874-17.874-17.874H36l0.047,10.984c0,0,124.109-0.087,132.531-0.087
    c8.922,0,12.088,5.781,12.088,12.115c0,4.916,0,24.526,0,24.526l-38.364-0.218l0.156,29.286c0.021,0.473-1.586,2.707-1.941,2.809
    c-0.356,0.051-4.582,0.082-5.209,0c-0.562-0.164-2.558-1.812-2.962-2.4c-0.572-0.813-21.449-39.971-22.164-41.571l0,0
    c0,1.907,0,42.95,0,42.95c0.055,0.183-0.333,0.904-0.562,0.97h-5.464c-0.227-0.07-0.617-0.787-0.562-0.97v-47.75
    c-0.091-0.871,2.192-2.97,2.911-2.962c0,0,4.701-0.079,5.362,0c0.514,0.129,2.317,1.453,2.656,1.941
    c0.473,0.65,21.143,40.447,21.143,40.447l0,0c0-2.111,0-41.111,0-41.111c-0.051-0.166,1.266-1.142,1.634-1.175h3.268
    c0.369,0.028,1.685,1.008,1.634,1.175l0.098,18.262L180.667,95z"/></symbol>
                                <symbol id="en"><path fill="#00bcff" d="M55.425,101.469v22.758c-0.101,0.834,1.953,2.851,2.595,2.854h25.324c0.187,0.051,0.928-0.309,1.038-0.519
    c0.142-0.293,0.222-4.179,0.104-4.812c-0.03-0.308-1.11-0.791-1.297-0.741H62.431v-18.785h17.54
    c0.187,0.046,0.932-0.269,1.038-0.467c0.133-0.26,0.137-4.03,0-4.307c-0.111-0.208-0.852-0.575-1.038-0.519h-17.8V80.585h20.757
    c0.452,0.013,1.248-1.253,1.297-1.557c0.039-0.432,0.039-2.198,0-2.647c-0.049-0.321-0.84-1.637-1.297-1.609H58.02
    c-0.641,0.003-2.696,2.02-2.595,2.854v23.686l-38.237,0.359c0,0,0-29.838,0-33.671s2.708-9.766,11.562-9.766
    c0.812,0,1.484-0.014,1.484-0.014l4.672-10.9H24.588c-9.872,0-17.874,8.003-17.874,17.874v71.498
    c0,9.872,5.536,17.874,17.874,17.874c3.162,0,148.103,0,148.103,0c9.872,0,17.874-8.003,17.874-17.874V65.196l0,0
    c0-9.872-8.003-17.874-17.874-17.874H34.906l-4.672,10.899c0,0,136.704-0.002,137.344-0.002c7.755,0,12.088,3.782,12.088,11.115
    s0,25.526,0,25.526l-37.364-0.218l0.156,29.286c0.021,0.473-1.586,2.707-1.941,2.809c-0.356,0.051-4.582,0.082-5.209,0
    c-0.562-0.164-2.558-1.812-2.962-2.4c-0.572-0.813-21.449-39.971-22.164-41.571l0,0c0,1.907,0,42.95,0,42.95
    c0.055,0.183-0.333,0.904-0.562,0.97h-5.464c-0.227-0.07-0.617-0.787-0.562-0.97v-47.75c-0.091-0.871,2.192-2.97,2.911-2.962
    c0,0,4.701-0.079,5.362,0c0.514,0.129,2.317,1.453,2.656,1.941c0.473,0.65,21.143,40.447,21.143,40.447l0,0
    c0-2.111,0-41.111,0-41.111c-0.051-0.166,1.266-1.142,1.634-1.175h3.268c0.369,0.028,1.685,1.008,1.634,1.175l0.098,18.262
    L179.667,95v37.833c0,0,0.614,11.334-9.666,11.334c-6.668,0-142.972,0-143.001,0c-6.375,0-9.812-3.916-9.812-8.5s0-33.792,0-33.792
    L55.425,101.469z"/></symbol>
                </svg>
                <div className="lanauage-icon">
                    <svg><use xlinkHref={curLan.path} transform="scale(0.1957,0.195)" x="-8" y="-45" viewBox="0 0 36 20" height="200" width="200"></use></svg>
                </div>
                <ul className="list-group">
                    {
                        list.map(item=>{
                            return <li key={item.id} className="list-group-item" onClick={()=>this.onClick(item)}>
                                <svg><use xlinkHref={item.path} transform="scale(0.13,0.13)" x="-8" y="-45" viewBox="0 0 28 17" width="200" height="200"/></svg>
                                <span>{item.name}</span>
                            </li>
                        })
                    }
                </ul>
            </div>
    }
}