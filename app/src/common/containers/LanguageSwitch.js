/**
 * Created by a on 2017/9/5.
 */
import React,{Component} from 'react';
import {getDefaultIntl} from '../../intl/index'
import {getObjectByKey} from '../../util/index'
export default class LanguageSwitch extends Component{
    constructor(props){
        super(props);
        this.state = {
            curLan:{id:"zh",name:"简体中文", path:"#zh"},
            list:[
                {id:"zh", name:"简体中文", path:"#zh"},
                {id:"en", name:"ENGLISH", path:"#en"}
            ]
        }

        this.onClick = this.onClick.bind(this);
    }

    componentWillMount(){
        getDefaultIntl((intl)=>{
            this.setState({curLan:getObjectByKey(this.state.list, 'id', intl.locale)});
        })
    }

    onClick(data){
        this.setState({curLan:data},()=>{
            window.setLanguage(data.id);
        });
    }

    render(){
        const {className=''} = this.props;
        const {curLan, list} = this.state;
        return <div className={"language-switch "+className}>
                <svg className="svgOnload">
                    <symbol id="zh"><path fill="#8a8a8a" d="M184.667,95v41.833l-2.333,7L175.5,148L24,148.167l-6.333-2.667l-3.479-5.833v-38.62c0,0,41.31,0.511,41.31,0.579
                    c-0.021,3.668,1.003,7.437,2.061,10.964C62.875,125.25,74,127.45,77.935,127.45c9.44,0,14.958-5.118,15.117-5.362
                    c0.113-0.209,0.199-0.433,0.255-0.664c0.024-0.272-0.017-4.189-0.051-4.494c-0.046-0.184-1.94-0.1-2.4,0.306
                    c-0.856,0.607-5.606,4.137-12.001,4.137c-9.23,0-15.781-9.04-15.781-19.07c0-18.302,11.176-21.734,15.372-21.734
                    C85.083,80,91.489,85.331,92.082,85.42c0.181,0.066,0.882-0.344,0.97-0.562c0.035-0.305,0.021-4.137,0-4.443
                    c-0.055-0.232-0.141-0.455-0.255-0.664c-0.205-0.3-4.922-5.158-14.095-5.158c-3.176-0.04-15.535,1.157-21.041,15.474
                    c-1.098,3.544-2.133,7.571-2.163,11.308c-0.001,0.159-41.31-0.531-41.31-0.531V63l4.145-6.5l7.354-3.188h6.297l-0.078-5.991h-6.318
                    c-9.872,0-17.874,8.003-17.874,17.874v71.498c0,9.872,8.003,17.874,17.874,17.874h148.103c9.872,0,17.874-8.003,17.874-17.874
                    V65.196l0,0c0-9.872-8.003-17.874-17.874-17.874H32l0.047,5.984l140.531-0.087l8.255,3.615l3.833,7.5v30.526l-41.364-0.218
                    l0.156,29.286c0.021,0.473-1.586,2.707-1.941,2.809c-0.356,0.051-4.582,0.082-5.209,0c-0.562-0.164-2.558-1.812-2.962-2.4
                    c-0.572-0.813-21.449-39.971-22.164-41.571l0,0c0,1.907,0,42.95,0,42.95c0.055,0.183-0.333,0.904-0.562,0.97h-5.464
                    c-0.227-0.07-0.617-0.787-0.562-0.97v-47.75c-0.091-0.871,2.192-2.97,2.911-2.962c0,0,4.701-0.079,5.362,0
                    c0.514,0.129,2.317,1.453,2.656,1.941c0.473,0.65,21.143,40.447,21.143,40.447l0,0c0-2.111,0-41.111,0-41.111
                    c-0.051-0.166,1.266-1.142,1.634-1.175h3.268c0.369,0.028,1.685,1.008,1.634,1.175l0.098,18.262L184.667,95z"/></symbol>
                                <symbol id="en"><path fill="#8a8a8a" d="M56.425,101.469v22.758c-0.101,0.834,1.953,2.851,2.595,2.854h25.324c0.187,0.051,0.928-0.309,1.038-0.519
                    c0.142-0.293,0.222-4.179,0.104-4.812c-0.03-0.308-1.11-0.791-1.297-0.741H63.431v-18.785h17.54
                    c0.187,0.046,0.932-0.269,1.038-0.467c0.133-0.26,0.137-4.03,0-4.307c-0.111-0.208-0.852-0.575-1.038-0.519H63.171V80.585h20.757
                    c0.452,0.013,1.248-1.253,1.297-1.557c0.039-0.432,0.039-2.198,0-2.647c-0.049-0.321-0.84-1.637-1.297-1.609H59.02
                    c-0.641,0.003-2.696,2.02-2.595,2.854v23.686l-42.237,0.359V63l4.145-6.5l7.354-3.188h6.297l-0.078-5.991h-6.318
                    c-9.872,0-17.874,8.003-17.874,17.874v71.498c0,9.872,8.003,17.874,17.874,17.874h148.103c9.872,0,17.874-8.003,17.874-17.874
                    V65.196l0,0c0-9.872-8.003-17.874-17.874-17.874H32l0.047,5.984l140.531-0.087l8.255,3.615l3.833,7.5v30.526l-41.364-0.218
                    l0.156,29.286c0.021,0.473-1.586,2.707-1.941,2.809c-0.356,0.051-4.582,0.082-5.209,0c-0.562-0.164-2.558-1.812-2.962-2.4
                    c-0.572-0.813-21.449-39.971-22.164-41.571l0,0c0,1.907,0,42.95,0,42.95c0.055,0.183-0.333,0.904-0.562,0.97h-5.464
                    c-0.227-0.07-0.617-0.787-0.562-0.97v-47.75c-0.091-0.871,2.192-2.97,2.911-2.962c0,0,4.701-0.079,5.362,0
                    c0.514,0.129,2.317,1.453,2.656,1.941c0.473,0.65,21.143,40.447,21.143,40.447l0,0c0-2.111,0-41.111,0-41.111
                    c-0.051-0.166,1.266-1.142,1.634-1.175h3.268c0.369,0.028,1.685,1.008,1.634,1.175l0.098,18.262L184.667,95v41.833l-2.333,7
                    L175.5,148L24,148.167l-6.333-2.667l-3.479-5.833v-37.792L56.425,101.469z"/></symbol>
                </svg>
                <div className="lanauage-icon">
                    <svg><use xlinkHref={curLan.path} transform="scale(0.1957,0.195)" x="-8" y="-45" viewBox="0 0 36 21" height="200" width="200"></use></svg>
                </div>
                <ul className="list-group">
                    {
                        list.map(item=>{
                            return <li key={item.id} className="list-group-item" onClick={()=>this.onClick(item)}>
                                <svg><use xlinkHref={item.path} transform="scale(0.1957,0.195)" x="-8" y="-45" viewBox="0 0 36 21" width="200" height="200"/></svg>
                                <span>{item.name}</span>
                            </li>
                        })
                    }
                </ul>
            </div>
    }
}